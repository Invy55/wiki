"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[571],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return h}});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(r),h=o,u=m["".concat(s,".").concat(h)]||m[h]||d[h]||a;return r?n.createElement(u,i(i({ref:t},c),{},{components:r})):n.createElement(u,i({ref:t},c))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},37674:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(67294);class o extends n.Component{componentDidMount(){(window.adsbygoogle=window.adsbygoogle||[]).push({})}render(){return n.createElement("div",{className:"displayAd",key:Math.random()},n.createElement("ins",{className:"adsbygoogle",key:Math.random(),style:{display:"block",textAlign:"center"},"data-ad-client":"ca-pub-3253384067482467","data-ad-slot":"5610548275","data-ad-format":"auto"}))}}},52562:function(e,t,r){r.r(t),r.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return c}});var n=r(83117),o=(r(67294),r(3905)),a=r(37674);const i={title:"How to restore the bootloader",slug:"/firmware/ripristino_bootloader",description:"Guide to restore the bootloader when flashing the wrong firmware for Flyingbear Ghost 5"},l=void 0,s={unversionedId:"firmware/ripristino_bootloader",id:"firmware/ripristino_bootloader",title:"How to restore the bootloader",description:"Guide to restore the bootloader when flashing the wrong firmware for Flyingbear Ghost 5",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/firmware/ripristino_bootloader.md",sourceDirName:"firmware",slug:"/firmware/ripristino_bootloader",permalink:"/en/docs/firmware/ripristino_bootloader",draft:!1,editUrl:"https://github.com/flyingbear-club-ita/wiki/tree/master/docs/firmware/ripristino_bootloader.md",tags:[],version:"current",frontMatter:{title:"How to restore the bootloader",slug:"/firmware/ripristino_bootloader",description:"Guide to restore the bootloader when flashing the wrong firmware for Flyingbear Ghost 5"},sidebar:"docs",previous:{title:"Firmware Stock",permalink:"/en/docs/firmware/firmware_stock"},next:{title:"How to restore bootloader using ST-LINK Utility",permalink:"/en/docs/firmware/ripristino_bootloader_alternativo"}},p={},c=[{value:"Materials",id:"materials",level:2},{value:"Prepare bootloader and firmware",id:"prepare-bootloader-and-firmware",level:2},{value:"Connections",id:"connections",level:2},{value:"How to flash the bootloader with STM32 Cube Programmer",id:"how-to-flash-bootloader-with-stm32-cube-programmer",level:2},{value:"Final steps",id:"final-steps",level:2}],d={toc:c};function m(e){let{components:t,...i}=e;return(0,o.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Authors"),": OrkoMastro e matteoberg"),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"The procedure below has been tested by multiple users, but we decline every reponsibility for any damage to the printer hardware or software")),(0,o.kt)(a.Z,{mdxType:"DisplayAd"}),(0,o.kt)("p",null,"If the wrong firmware is flashed on the printer, it can happen to see the update process getting stuck on the ",(0,o.kt)("strong",{parentName:"p"},"Font table updating 100%")," screen, then, when rebooting the printer, the ",(0,o.kt)("strong",{parentName:"p"},"Booting...")," screen will appear"),(0,o.kt)("p",null,"In this case, it is necessary to upload a new bootloader on the motherboard"),(0,o.kt)("p",null,"Don't panic: it can be fixed, you just need a bit of patience and a couple of extra tools"),(0,o.kt)("p",null,"There's already an ongoing discussion on a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/makerbase-mks/MKS-Robin-Nano-S-Firmware/issues/3"},"github issue"),", in case you want to join that conversation or you need more details or clarifications"),(0,o.kt)("h2",{id:"materials"},"Materials"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.amazon.it/Youmile-Emulator-Downloader-programmatore-programmazione/dp/B07QBLNDPM/ref=sr_1_4?__mk_it_IT=%C3%85M%C3%85%C5%BD%C3%95%C3%91&dchild=1&keywords=ST-LINK+V2&qid=1633304784&s=electronics&sr=1-4"},"Youmile Youmile ST-LINK V2 programmer")," ",(0,o.kt)("strong",{parentName:"li"},"to buy from Amazon, or wherever you prefer")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.st.com/en/development-tools/stm32cubeprog.html"},"STM32 Cube Programmer"),", compatible with Windows 32bit, Windows 64 bit, Mac OSx and Linux"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/makerbase-mks/MKS-Robin-Nano-V1.X/archive/refs/heads/master.zip"},"File per il Bootloader"))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"STM32 Cube Programmer might not work on very old Windows systems"),(0,o.kt)("p",{parentName:"admonition"},"In this case, continue to the ",(0,o.kt)("a",{parentName:"p",href:"/en/docs/firmware/ripristino_bootloader_alternativo"},"next page"),", where you can find a full guide for an alternative solution")),(0,o.kt)(a.Z,{mdxType:"DisplayAd"}),(0,o.kt)("h2",{id:"prepare-bootloader-and-firmware"},"Prepare bootloader and firmware"),(0,o.kt)("p",null,"Once you've downloaded the bootloader archive, extract the ",(0,o.kt)("strong",{parentName:"p"},"Robin_nano35_v13_f4_boot_210615.hex")," file from the path ",(0,o.kt)("strong",{parentName:"p"},"/MKS-Robin_Nano-V1.X-master/Bootloader/")," and save it on your Desktop, to make the next steps easier"),(0,o.kt)("p",null,"Then, extract the ",(0,o.kt)("strong",{parentName:"p"},"Mks_Nano35_V2.0.3.6 Release file.rar")," from the path ",(0,o.kt)("strong",{parentName:"p"},"/MKS-Robin-Nano-V1.X-master/Nano firmware v2.x.x/")," and extract the folder ",(0,o.kt)("strong",{parentName:"p"},"English")," in the path ",(0,o.kt)("strong",{parentName:"p"},"/Mks_Nano35_V2.0.3.6 Release file"),", still saving it on the Desktop to make things easier. This folder contains the MKS firmware, which is the base to then install the Flyingbear firmware"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Before proceeding, make sure the print head is in the homing position and the plate is a few centimeters away from the print head!!!")),(0,o.kt)("h2",{id:"connections"},"Connections"),(0,o.kt)("p",null,"Before connecting the ST-LINK (the USB programmer previously mentioned) to the PC, you should first switch off the printer using the switch on the back of the printer, ",(0,o.kt)("strong",{parentName:"p"},"making sure, though, that the power cable is still connected to the power socket")),(0,o.kt)("p",null,"After that, we can remove the bottom panel of the printer, flipping it on its left side, to make all the electronics accessible, by removing the six screws from the panel"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To make your life easier, you can unscrew the two screws holding the cooling fan of the motherboard and remove it, to have more space for the next steps")),(0,o.kt)("p",null,"To connect the motherboard to the ST-LINK, you can follow the writigns on the front of the USB programmer"),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:r(17564).Z}," ",(0,o.kt)("img",{alt:"ST-Link programmaer",src:r(57546).Z,width:"400",height:"400"})," ")),(0,o.kt)("p",null,"The pins to connect on the motherboard are the ones in the image below"),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:r(90524).Z}," ",(0,o.kt)("img",{alt:"Pin della Scheda da collegare",src:r(70376).Z,width:"603",height:"492"})," ")),(0,o.kt)("p",null,"For the sake of simplicity, below you can find the corresponding connections"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"center"},"Pin ST_LINK"),(0,o.kt)("th",{parentName:"tr",align:"center"},"Pin Motherboard"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"SWCLK"),(0,o.kt)("td",{parentName:"tr",align:"center"},"3")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"SWDIO"),(0,o.kt)("td",{parentName:"tr",align:"center"},"1")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"GND"),(0,o.kt)("td",{parentName:"tr",align:"center"},"6")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"center"},"3.3v"),(0,o.kt)("td",{parentName:"tr",align:"center"},"2")))),(0,o.kt)("p",null,(0,o.kt)("a",{target:"_blank",href:r(31642).Z}," ",(0,o.kt)("img",{alt:"Dettaglio Pin Scheda",src:r(76784).Z,width:"306",height:"202"})," "),"     ",(0,o.kt)("a",{target:"_blank",href:r(37891).Z}," ",(0,o.kt)("img",{alt:"Dettaglio Pin Programmatore",src:r(17016).Z,width:"259",height:"259"})," ")),(0,o.kt)("p",null,"Make sure the cables are firmly connected to the motherboard pins and that they're wired correctly"),(0,o.kt)("p",null,"Connect the ST-LINK to a PC USB port. If all connections are correct, the screen and the motherboard should light up"),(0,o.kt)(a.Z,{mdxType:"DisplayAd"}),(0,o.kt)("h2",{id:"how-to-flash-bootloader-with-stm32-cube-programmer"},"How to flash the bootloader with STM32 Cube Programmer"),(0,o.kt)("p",null,"Open the STM32CubeProgrammer application you previously downloaded, then follow the next steps"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"Connect")," button\n",(0,o.kt)("a",{target:"_blank",href:r(11980).Z}," ",(0,o.kt)("img",{alt:"STM32 Connect",src:r(38265).Z,width:"1202",height:"782"})," ")),(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"Full chip erase")," button"),(0,o.kt)("li",{parentName:"ol"},"Click on ",(0,o.kt)("strong",{parentName:"li"},"Browse"),", then select the ",(0,o.kt)("em",{parentName:"li"},"Robin_nano35_v13_f4_boot_210615.hex")," file that you previously saved"),(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},"Start Programming")," button, then wait for the process to complete\n",(0,o.kt)("a",{target:"_blank",href:r(30704).Z}," ",(0,o.kt)("img",{alt:"STM32 Start Programming",src:r(98043).Z,width:"1202",height:"782"})," ")),(0,o.kt)("li",{parentName:"ol"},"Once completed the bootloader flash procedure, you can disconnec the ST-LINK from the USB port and the cables from the motherboard; after this, motherboard and screen should both turn off")),(0,o.kt)("h2",{id:"final-steps"},"Final steps"),(0,o.kt)("p",null,"before continuing, you can put back the cooling fan and the bottom panel, then bring back the printer to the original position"),(0,o.kt)("p",null,"Before flashing a new firmware, insert an SD card in the PC, then format it as ",(0,o.kt)("strong",{parentName:"p"},"FAT32")),(0,o.kt)("p",null,"Once formatted, copy the whole content of the ",(0,o.kt)("strong",{parentName:"p"},"English")," folder previously saved on the Desktop"),(0,o.kt)("p",null,"For the sake of clarity, these are the files/folders you should be copying on to the SD card"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"mks_font folder"),(0,o.kt)("li",{parentName:"ul"},"mks_pic folder"),(0,o.kt)("li",{parentName:"ul"},"MksWifi.bin file"),(0,o.kt)("li",{parentName:"ul"},"robin_nano35_cfg.txt file"),(0,o.kt)("li",{parentName:"ul"},"Robin_nano35.bin file")),(0,o.kt)("p",null,"Once you've copied all the files on the SD Card, remove it safely from your computer and insert in the 3d printer, then turn it on again (",(0,o.kt)("strong",{parentName:"p"},"don't foget to switch the power button on!!!"),")"),(0,o.kt)("p",null,"Once printer starts, the flashing procedure should start"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"In case the firmware flashing procedure should hang up and get stuck on ",(0,o.kt)("strong",{parentName:"p"},"Updating 100%"),", wait for about ten minutes, then turn the printer off using the power button at the back, extract the SD card and turn it on again")),(0,o.kt)("p",null,"If the procedure went well, you should see on your screen the Makerbase logo: it means you've installed the Custom MKS Firmware you were longing for!!!"),(0,o.kt)("p",null,"At this point, you can install any other firmware compatible with your motherboard"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you have any question, please do not hesitate to contact us on Discord:\nmatteoberg#3262 e OrkoMastro#0507")),(0,o.kt)(a.Z,{mdxType:"DisplayAd"}))}m.isMDXComponent=!0},17564:function(e,t,r){t.Z=r.p+"assets/files/01-0d9473a03cd09f09ce8331be8787d5d1.jpg"},37891:function(e,t,r){t.Z=r.p+"assets/files/02-d165504725332b6dac5608cc0505d61b.jpg"},90524:function(e,t,r){t.Z=r.p+"assets/files/03-f81d81234b01f6e8fa227ea3258c77b0.jpg"},31642:function(e,t,r){t.Z=r.p+"assets/files/04-b98a61ef9750a31473adee57786f207d.jpg"},11980:function(e,t,r){t.Z=r.p+"assets/files/05-b56bffc70b93c956dceaf45b571ad97b.png"},30704:function(e,t,r){t.Z=r.p+"assets/files/06-f6014b0bd1a94fb5a3dac201eeb86657.png"},57546:function(e,t,r){t.Z=r.p+"assets/images/01-0d9473a03cd09f09ce8331be8787d5d1.jpg"},17016:function(e,t,r){t.Z=r.p+"assets/images/02-d165504725332b6dac5608cc0505d61b.jpg"},70376:function(e,t,r){t.Z=r.p+"assets/images/03-f81d81234b01f6e8fa227ea3258c77b0.jpg"},76784:function(e,t,r){t.Z=r.p+"assets/images/04-b98a61ef9750a31473adee57786f207d.jpg"},38265:function(e,t,r){t.Z=r.p+"assets/images/05-b56bffc70b93c956dceaf45b571ad97b.png"},98043:function(e,t,r){t.Z=r.p+"assets/images/06-f6014b0bd1a94fb5a3dac201eeb86657.png"}}]);